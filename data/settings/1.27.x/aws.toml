[[docs.ref.config]]
description = """
The base64-encoded representation of data used to populate `~/.aws/config`
"""

default = """
A minimal configuration to enable or disable the [AWS FIPS endpoints], depending on the [variant flavor]

[AWS FIPS endpoints]: https://docs.aws.amazon.com/general/latest/gr/rande.html#FIPS-endpoints
[variant flavor]: ../../../concepts/variants/#flavors
"""

note = """
Bottlerocket FIPS variants are available all AWS and AWS GovCloud regions. 
However, in regions without FIPS support (those outside of the US and Canada), **you must opt-out** from using [AWS FIPS endpoints] by updating the `settings.aws.confg` API with the encoded AWS config to disable AWS FIPS endpoints.
You can use the following values in your nodes to opt-out from using FIPS endpoints in AWS API calls.

```toml
[settings.aws]
config = "W2RlZmF1bHRdCnVzZV9maXBzX2VuZHBvaW50PWZhbHNl"
```

```shell
apiclient set settings.aws.config="W2RlZmF1bHRdCnVzZV9maXBzX2VuZHBvaW50PWZhbHNl"
```

The `base64` string corresponds to the following configuration:

```text
[default]
use_fips_endpoint=false
```

[AWS FIPS endpoints]: https://docs.aws.amazon.com/general/latest/gr/rande.html#FIPS-endpoints

If your encoded data includes credentials, they are not automatically rotated.
You are responsible for managing credential rotation.
"""

warning = """
Avoid adding a `[profile default]` section.
Recent versions of `aws-iam-authenticator` (and perhaps other components) pick up the default credential settings when `settings.aws.profile` is set to `default`.
"""
see = [
    ["`ecr-credential-provider` under [`settings.kubernetes.credential-providers`](../kubernetes/#credential-providers)"]
]

